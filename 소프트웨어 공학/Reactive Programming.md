# 반응형 프로그래밍

## 참고...? (채용 우대사항)

- 많은 곳에서 반응형 프로그래밍 키워드가 많이 보입니다.
- Combine보다는 RxSwift라는 키워드가 좀더 많이 보이는 것 같습니다.

<img width="1200" src="https://github.com/user-attachments/assets/4eb4500d-72ee-40c3-ae2e-2a311186a7d0">

## 반응형 프로그래밍이란?

<img width="1200" src="https://github.com/user-attachments/assets/7252e21d-e0e0-416a-9067-76fe7355a2b4">

- In computing, reactive programming is a declarative programming paradigm concerned with data streams and the propagation of change.
- 데이터 스트림과 변화의 전파와 관련된 선언적 프로그래밍 패러다임... 무슨뜻일까요? 하나하나 간단하게 살펴봅시다.

### 간단한 의사코드

```
var b = 1
var c = 2
var a = b + c
b = 10
console.log(a) // 3 출력!
```

- 만약에 우리가 $= 라는 단순히 초기 계산뿐 아니라, 오른쪽 표현식에 포함된 변수들이 변경될 때 자동으로 재계산을 해주는 가상의 반응형 대입 연산자를 만든다고 해본다면

```
var b = 1
var c = 2
var a $= b + c
b = 10
console.log(a) // 12 출력!
```

- 데이터의 변화에 따라서 a가 12로 자동으로 업데이트되는 것을 볼 수 있습니다.
- 이렇게 b나 c가 바뀌게 된다면 a도 바꾸도록 하여라라는 $=를 추가해 줌으로써 반응형 프로그래밍이 되었습니다.
- $=는 무엇을 할 것인지 선언적 방식으로 정의했다고 합니다. b나 c가 바뀌면 어떻게 a가 업데이트 되는지 내부 구현은 보이지 않고, 나는 무엇을 원하는지만 정의했기 때문에 선언형 프로그래밍이라고 합니다.

> [!NOTE]
> 선언형 프로그래밍의 성격을 가지고 있으면서 데이터의 변경을 전파하고 반영하는 방식을 반응형 프로그래밍이라고 합니다.

### 데이터의 흐름

- 데이터 흐름, 변화의 전파라고 했는데 데이터 흐름이 변화의 전파가 아닐까요? 왜 이렇게 구분을 시켰는지 알아봅시다.
- 데이터 스트림이라는 키워드가 반응형 프로그래밍에서 아주 중요하게 작용합니다.

- 아래의 예시는 반응형 프로그래밍은 아니고, 데이터 스트림의 아주 간단한 예시입니다.
- 각 단계가 데이터의 변환 단계를 나타내고 한 흐름에 따라 처리되는 모습이 보입니다.

```JavaScript
// 배열에 2를 곱한 뒤 앞의 3개 요소 출력하기

Array.of(1,2,3,4,5)
  .map(x => x * 2)
  .slice(0, 3)
  .forEach(x => console.log(x))
```

### PULL 과 PUSH

- git을 사용해본 우리라면 아주 익숙한 단어라고 생각합니다.
- 반응형 프로그래밍은 기본적으로는 `PUSH` 방식으로 동작합니다.

- `PULL`은 데이터 외부 환경(데이터 생산자)에게서 소비자가 데이터를 달라고 하는 것입니다. 결국 데이터의 변경을 계속 물어봐야 한다는 것이다.

<img width="400" src="https://github.com/user-attachments/assets/d1cca9da-4c50-4502-99c3-ae07444adb7a" />

- `PUSH`는 데이터 생산자가 데이터를 주는 것입니다. 알아서 데이터가 변경되면 데이터 생산자가 소비자에게 데이터를 줄 수 있겠죠?

<img width="400" src="https://github.com/user-attachments/assets/df13ef30-eb40-4b2c-8b6c-c504f8b35ee4" />

- 제어권을 외부에 준다고 해서 제어권 역전이라는 용어로도 반응형 프로그래밍을 설명한다고 합니다.
- 하지만 이렇게 PUSH 방식으로 주기만 한다면 데이터 소비자 입장에서 데이터가 필요하지 않거나 데이터를 사용할 수 없는 상황이라면 어떨까요?
- 이때 발생하는 문제가 백프레셔(Backpressure) 문제입니다. 이러한 문제를 해결하기 위해서 처리 가능한 데이터 양만 요청하는 등 처리가 필요합니다.
- 실제 React는 반응형 프로그래밍 성격인 `PUSH` 방식으로 동작하는 것처럼 보이지만 내부적으로는 `PULL` 방식으로 동작한다고 합니다.

## 반응형 프로그래밍의 등장 배경

- 반응형 프로그래밍은 크게 두가지 문제를 해결하기 위해서 나오지 않았을까요?

### 복잡한 데이터 구조와 흐름

- 간단한 웹사이트만 보더라도 수없이 많은 Input, Output으로 이루어져 있습니다. 처리해야 하는 데이터가 많아지면서  데이터의 변경이 발생할 때마다 어떠한 UI를 바꿔주거나 어떠한 행동을 해야하는지 관리해줄 필요가 생겼습니다.

### 비동기 프로그래밍

- 컴퓨터의 처리가 발전하면서 다양한 비동기 작업들이 많아지면서 전통적인 명령형 방식은 콜백 지옥이나 상태관리의 복잡성으로 문제가 생겨 이를 해결하고자 반응형 프로그래밍이 나왔다고 합니다. 데이터 스트림과 연산자 체인을 통해 비동기 프로세스를 관리할 수 있습니다.
